@using Borg.Infra.DTO
@using Borg.Infra.Storage.Assets
@using Borg.Infra.Storage.Assets.Contracts
@model Tidings
@inject IStaticImageCacheStore<int> _cache
@{
    var size = VisualSize.Large;
    VisualSize.TryParse(Model[Tidings.DefinedKeys.Size], out size);
    var url = string.Empty;
    if (int.TryParse(Orchestrator.Page.PrimaryImageFileId, out var fileId))
    {
        url = (await _cache.PublicUrl(fileId, size)).AbsoluteUri;
    }

}

@if (!url.IsNullOrWhiteSpace())
{
    <figure>
        <img class="img-responsive img" src="@url"/>
    </figure>
}